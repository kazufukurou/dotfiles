#!/bin/sh

. ~/.config/wmrc/config

if [ $# -eq 1 ]; then
    mwids=""
    uwids=""
    for wid in $(lsw -a); do
        no_hints=$(xprop -id $wid WM_HINTS | grep "not found")
        if [ "$no_hints" = "" ]; then
            class=$(xprop -id $wid WM_CLASS | cut -d\" -f2)
            if [ "$class" != "panel" ]; then
                case $1 in
                    1) [ $class = $TERMINAL ] && mwids="$mwids $wid" || uwids="$uwids $wid" ;;
                    2) [ $class = $BROWSER ] && mwids="$mwids $wid" || uwids="$uwids $wid" ;;
                    3) [ $class = $TERMINAL ] || [ $class = $BROWSER ] && uwids="$uwids $wid" || mwids="$mwids $wid" ;;
                    a) mwids="$mwids $wid" ;;
                esac
            fi
        fi
    done
    mapw -m $mwids
    mapw -u $uwids
    echo "T" > $PANEL_FIFO
else
    echo "usage: $(basename $0) <1|2|3|a>"
fi
