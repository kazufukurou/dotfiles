#!/bin/sh

font="monospace:pixelsize=20"
if [ "$1" = "cal" ]; then
    st -f $font -e zsh -i -c 'cal -3; read -s -n 1'
elif [ "$1" = "alsa" ]; then
    st -f $font -e zsh -i -c alsamixer
elif [ "$1" = "vimbedit" ]; then
    st -g 80x8 -f $font -e zsh -i -c "vim -c '$' $2"
elif [ "$1" = "vedit" ]; then
    file=/tmp/vedit
    echo '' | xclip -selection clipboard
    xdotool getactivewindow key ctrl+a ctrl+c
    xclip -selection clipboard -o > $file
    st -g 80x8 -f $font -e zsh -i -c "vim -c '$' $file"
    text=$(cat $file)
    echo -n "$text" | xclip -selection clipboard
    rm $file
    if [ "$(xdotool getactivewindow getwindowname)" != "st" ]; then
        xdotool getactivewindow key --clearmodifiers ctrl+v
    fi
else
    st -f $font
fi
