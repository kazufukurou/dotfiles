#!/bin/bash

if [ "$1" = "vedit" ]; then
  file="$XDG_CACHE_HOME/vim/vedit"
  wl-paste -n > $file
  alacritty \
    --option window.dimensions.columns=80 window.dimensions.lines=8 \
    --class mypopup \
    --command zsh -i -c "uim-fep -s none -e $EDITOR -c '$' $file"
  wl-copy "$(cat $file)"
  rm $file
elif [ "$1" = "quteedit" ]; then
  alacritty \
    --option window.dimensions.columns=80 window.dimensions.lines=8 \
    --class mypopup \
    --command zsh -i -c "uim-fep -s none -e $EDITOR $2"
elif [ "$1" = apps ]; then
  rg --no-filename --only-matching -r '$2' '.*Exec=(.*/)?([^ ]+)' \
    $(rg Terminal=true /usr/share/applications --files-without-match) | \
    sort -u | fzf --info hidden | (nohup $SHELL &) > /dev/null 2>&1
elif [ "$1" = "run" ]; then
  alacritty \
    --option window.dimensions.columns=40 window.dimensions.lines=8 \
    --class mypopup \
    --command zsh -i -c "term apps"
else
  alacritty --command uim-fep -s none
fi
