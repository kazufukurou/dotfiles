#!/bin/sh

# fix broken base16-shell theme after opening vim from vifm
cmdterm="foot -t screen-256color"
cmdexec="$cmdterm zsh -i -c"
cmdvim="$cmdterm -g 800x208 zsh -i -c"

if [ "$1" = "vimbdl" ]; then
    $cmdexec "cd $VIMB_DOWNLOAD_PATH && curl -LJOC - -e '$VIMB_URI' $2; read -s -n 1"
elif [ "$1" = "vimbedit" ]; then
    $cmdvim "vim -c '$' $2"
elif [ "$1" = "vedit" ]; then
    file="$XDG_CACHE_HOME/vim/vedit"
    wl-paste -n > $file
    $cmdvim "vim -c '$' $file"
    wl-copy "$(cat $file)"
    rm $file
else
    $cmdterm
fi
