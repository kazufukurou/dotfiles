#!/bin/sh

usage() {
    echo "Usage: `basename $0` <start|pause|next|prev>"
    echo "  or   `basename $0` <play|add> PATH"
    exit 1
}

socket=$HOME/.config/mpv/socket

if [ $# -eq 2 ]; then
    if [ "$1" = "play" ]; then echo "loadfile \"$2\"" | socat - "$socket"
    elif [ "$1" = "add" ]; then echo "loadfile \"$2\" append-play" | socat - "$socket"
    else usage
    fi
elif [ $# -eq 1 ]; then
    if [ "$1" = "start" ]; then mpv --shuffle --quiet --idle=yes --input-ipc-server=$socket
    elif [ "$1" = "pause" ]; then echo 'cycle pause' | socat - "$socket"
    elif [ "$1" = "next" ]; then echo 'playlist-next' | socat - "$socket"
    elif [ "$1" = "prev" ]; then echo 'playlist-prev' | socat - "$socket"
    else usage
    fi
else usage
fi
