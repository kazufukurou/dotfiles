colorscheme my

# show 3 rows and columns around the cursor
set-option global scrolloff 3,3
# indent with 2 spaces
set-option global indentwidth 2
# hide clippy
set-option global ui_options ncurses_assistant=none

# highlight trailing whitespace
add-highlighter global/ regex \h+$ 0:Error

# fix default mappings
map global normal / /(?i)
map global normal <minus> <a-i>
map global normal _ <a-a>
map global normal = <a-s>
map global normal + <a-.>
map global normal \' <a-semicolon>
map global normal D C
map global normal C <a-C>
map global normal <a-a> ''
map global normal <a-i> ''
map global normal <a-s> ''
map global normal <a-.> ''
map global normal <a-semicolon> ''

# user mappings
map global user c ':comment-line<ret>' -docstring 'comment line'
map global user f ': find-file ' -docstring 'open file'
map global user p '<a-!>wl-paste -n<ret>' -docstring 'paste from system clipboard after selection'
map global user P '!wl-paste -n<ret>' -docstring 'paste from system clipboard before selection'
map global user y '<a-|> wl-copy<ret>' -docstring 'yank to system clipboard'
map global user q ': quit!<ret>' -docstring 'quit without saving'
map global user w ': write-all<ret>' -docstring 'write all'
map global user z ': write-all-quit<ret>' -docstring 'write all and quit'

define-command find-file -params 1 -shell-script-candidates %{ fd --type file } %{ edit %arg{1} }

# make man readonly
hook global WinSetOption filetype=man %{ set buffer readonly true }

