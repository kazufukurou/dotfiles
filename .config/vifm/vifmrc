colorscheme base16
set syscalls " don't use standard utilites for file operations
set slowfs=curlftpfs " don't do too much requests to slow file systems
set vicmd=$EDITOR
set trash " use trash
set trashdir=~/.local/share/Trash
set fusehome=/tmp/vifm_FUSE " if no FUSE_HOME set
set history=100 " directory history
set followlinks " follow links on l or Enter.
set sortnumbers " natural sort of (version) numbers within text.
set undolevels=100 " maximum number of changes that can be undone.
set novimhelp " don't use vim.txt help file
set norunexec " don't run executables on Enter
set fastrun " allow partial commands (e.g. :!Te instead of :!Terminal or :!Te<tab>).
set wildmenu " show list of matches on tab complition in command-line mode
set ignorecase " ignore case in search patterns...
set smartcase " unless it contains at least one uppercase
set nohlsearch " don't highlight search results automatically
set incsearch " use increment searching (search while typing)
set scrolloff=4 " try to leave some space from cursor to upper/lower border in lists
set statusline=" %t%= %A %10u:%-7g %15s %20d "
set timefmt=%Y-%m-%d\ %H:%M
set noiec " use KiB, MiB, ... instead of KB, MB, ...
set tuioptions-=s " remove borders
set classify= " don't show / after directory name

" :mark mark /full/directory/path [filename]
mark b ~/bin/
mark h ~/

" :com[mand] command_name action
" The following macros can be used in a command
" %a is replaced with the user arguments.
" %c the current file under the cursor.
" %C the current file under the cursor in the other directory.
" %f the current selected file, or files.
" %F the current selected file, or files in the other directory.
" %b same as %f %F.
" %d the current directory name.
" %D the other window directory name.
" %m run the command in a menu window
command df df -h %m 2> /dev/null
command diff $EDITOR -d %f %F
command zip zip -r %f.zip %f
command run !! ./%f
command make !!make
command vgrep $EDITOR "+grep %a"
command! fzfcd :set noquickview | :execute 'goto' fnameescape(term('fd | fzf 2>/dev/tty'))

" The file type is for the default programs to be used with
" a file extension.
" :filetype pattern1,pattern2 defaultprogram,program2
" :fileviewer pattern1,pattern2 consoleviewer
" The other programs for the file type can be accessed with the :file command
" The command macros %f, %F, %d, %F may be used in the commands.
" The %a macro is ignored.  To use a % you must put %%.

" For automated FUSE mounts, you must register an extension with :file[x]type
" in one of following formats:
"
" :filetype extensions FUSE_MOUNT|some_mount_command using %SOURCE_FILE and %DESTINATION_DIR variables
" %SOURCE_FILE and %DESTINATION_DIR are filled in by vifm at runtime.
" A sample line might look like this:
" :filetype *.zip,*.jar,*.war,*.ear FUSE_MOUNT|fuse-zip %SOURCE_FILE %DESTINATION_DIR
"
" :filetype extensions FUSE_MOUNT2|some_mount_command using %PARAM and %DESTINATION_DIR variables
" %PARAM and %DESTINATION_DIR are filled in by vifm at runtime.
" A sample line might look like this:
" :filetype *.ssh FUSE_MOUNT2|sshfs %PARAM %DESTINATION_DIR
" %PARAM value is filled from the first line of file (whole line).
" Example first line for SshMount filetype: root@127.0.0.1:/
"
" You can also add %CLEAR if you want to clear screen before running FUSE
" program.

" Pdf
filextype *.pdf mupdf %f 2> /dev/null &,zathura %f 2> /dev/null &,apvlv %f 2> /dev/null &,xpdf %f 2> /dev/null &
fileview *.pdf pdftotext -nopgbrk %c -

" PostScript
filextype *.ps,*.ps.gz gv %c %i &

" Djvu
filextype *.djvu apvlv %f

" Audio
filetype *.wav,*.mp3,*.flac,*.ogg,*.m4a,*.ape mpvcmd %d/%f
fileviewer *.wav,*.mp3,*.flac,*.ogg,*.m4a,*.ape ffmpeg -i

" Video
filextype *.avi,*.mp4,*.m4v,*.wmv,*.dat,*.3gp,*.ogv,*.mkv,*.mpg,*.vob,*.flv,*.ogm,*.mov,*.webm
    \ {View using mpv}
    \ mpv %f 2> /dev/null &,
fileviewer *.avi,*.mp4,*.wmv,*.dat,*.3gp,*.ogv,*.mkv,*.mpg,*.vob
    \ ffprobe -show_files -pretty %f 2> /dev/null

" Web
filextype *.html,*.htm vimb %f %i &

" Object
filetype *.o nm %f | less

" Image
filextype *.bmp,*.jpg,*.jpeg,*.png,*.webp,*.gif,*.xpm imv -s shrink -n %f * &> /dev/null &
fileviewer *.bmp,*.jpg,*.jpeg,*.png,*.webp,*.gif,*.xpm convert -identify %f -verbose /dev/null

" SVG
filextype *.svg inkview %f &> /dev/null &

" MD5
filetype *.md5 md5sum -c %f,

" FuseZipMount
filetype *.zip,*.jar,*.war,*.ear
    \ {Mount with fuse-zip}
    \ FUSE_MOUNT|fuse-zip %SOURCE_FILE %DESTINATION_DIR,
    \ {View contents}
    \ zip -sf %c | less,
    \ tar -xf %c,
fileviewer *.zip,*.jar,*.war,*.ear zip -sf %c

" ArchiveMount
filetype *.tar.bz2,*.tbz2,*.tgz,*.tar.gz
    \ {Mount with archivemount}
    \ FUSE_MOUNT|archivemount %SOURCE_FILE %DESTINATION_DIR,
fileviewer *.tgz,*.tar.gz tar -tzf %c
fileviewer *.tar.bz2,*.tbz2 tar -tjf %c

" Rar2FsMount
filetype *.rar
    \ {Mount with rar2fs}
    \ FUSE_MOUNT|rar2fs %SOURCE_FILE %DESTINATION_DIR,

" IsoMount
filetype *.iso
    \ {Mount with fuseiso}
    \ FUSE_MOUNT|fuseiso %SOURCE_FILE %DESTINATION_DIR,

" SshMount
filetype *.ssh
    \ {Mount with sshfs}
    \ FUSE_MOUNT2|sshfs %PARAM %DESTINATION_DIR,

" FtpMount
filetype *.ftp
    \ {Mount with curlftpfs}
    \ FUSE_MOUNT2|curlftpfs -o ftp_port=-,,disable_eprt %PARAM %DESTINATION_DIR,

" Fuse7z
filetype *.7z
    \ {Mount with fuse-7z}
    \ FUSE_MOUNT|fuse-7z %SOURCE_FILE %DESTINATION_DIR,

" Office files
filextype *.doc,*.docx,*.xls,*.xlsx libreoffice %f &> /dev/null &
fileview *.docx, docx2txt.pl %f -

" Directories
filextype */
fileview */ tree %f

" Open all other files with default system programs (you can also remove all
" :file[x]type commands above to ensure they don't interfere with system-wide
" settings).  By default all unknown files are opened with 'vi[x]cmd'
" uncommenting one of lines below will result in ignoring 'vi[x]cmd' option
" for unknown file types.
" For *nix:
" filetype * xdg-open

" what should be saved automatically between vifm runs
set vifminfo=dhistory,savedirs,chistory,state,tui,shistory,phistory,dirstack,registers,bookmarks

nnoremap s :shell<cr>
nnoremap S :sort<cr>
nnoremap w :view<cr>
" open file in the background using its default program
nnoremap gb :file &<cr>l
" yank current directory path into the clipboard
nnoremap yd :!echo %d | xclip %i<cr>
" yank current file path into the clipboard
nnoremap yf :!echo %c:p | xclip %i<cr>
" start rename with cursor at the start
nnoremap I cw<c-a>
" start rename with blank name
nnoremap cc cw<c-u>
" start rename with cursor at the end and trimmed extension
nnoremap A cw<c-w>
" toggle wrap setting on ,w key
nnoremap ,w :set wrap!<cr>
nnoremap ; :
nnoremap ,f :fzfcd<cr>
nnoremap ,p :!mpvcmd %d/%f<cr>
nnoremap ,a :!mpvcmd --add %d/%f<cr>
nnoremap ,e :!dtrx %f<cr>
nnoremap ,v :!$EDITOR %f<cr>
" open terminal in current directory
nnoremap ,t :!term 2> /dev/null &<cr>
